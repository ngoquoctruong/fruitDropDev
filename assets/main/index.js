System.register("chunks:///_virtual/UIManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,i,t,a,n,o,l,u,c,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Node,u=e.Label,c=e.AudioSource,s=e.Component}],execute:function(){var p,y,g,b,f,m,v,h,L,w,z,M,d,I,O;n._RF.push({},"0978eIL/6hIl7rstx9hjSo+","UIManager",void 0);var S=o.ccclass,x=o.property;e("UIManager",(p=S("UIManager"),y=x(l),g=x(l),b=x(l),f=x(u),m=x(u),v=x(c),p((w=r((L=function(e){function r(){for(var r,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return r=e.call.apply(e,[this].concat(n))||this,t(a(r),"titleLayer",w,a(r)),t(a(r),"mainMenuLayer",z,a(r)),t(a(r),"gameOverLayer",M,a(r)),t(a(r),"score",d,a(r)),t(a(r),"gameOverScore",I,a(r)),t(a(r),"sfx",O,a(r)),r}i(r,e);var n=r.prototype;return n.setScore=function(e){this.score.string=e,this.gameOverScore.string=e},n.showGameOver=function(){this.sfx.play(),this.mainMenuLayer.active=!1,this.gameOverLayer.active=!0},n.onPause=function(){},r}(s)).prototype,"titleLayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=r(L.prototype,"mainMenuLayer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=r(L.prototype,"gameOverLayer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=r(L.prototype,"score",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=r(L.prototype,"gameOverScore",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=r(L.prototype,"sfx",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=L))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./Ball.ts","./ObstacleSpawner.ts"],(function(t){"use strict";var e,r,n,o,i,a,u,l,s,c,h,p,f,g,b;return{setters:[function(t){e=t.defineProperty,r=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.assertThisInitialized,i=t.initializerDefineProperty},function(t){a=t.cclegacy,u=t._decorator,l=t.AudioSource,s=t.systemEvent,c=t.SystemEvent,h=t.director,p=t.Component},function(t){f=t.UIManager},function(t){g=t.Ball},function(t){b=t.ObstacleSpawner}],execute:function(){var d,S,m,M,y,v,C,E,I,T,A,G,w;t("GAME_STATE",void 0),a._RF.push({},"87501ghk+5B3aHIts1KkJPN","GameManager",void 0);var L,_=u.ccclass,P=u.property;!function(t){t[t.TITLE=0]="TITLE",t[t.PLAYING=1]="PLAYING",t[t.PAUSE=2]="PAUSE",t[t.GAME_OVER=3]="GAME_OVER"}(L||(L=t("GAME_STATE",{})));t("GameManager",(d=_("GameManager"),S=P(g),m=P(b),M=P(f),y=P(l),d((w=G=function(t){function r(){for(var r,n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return r=t.call.apply(t,[this].concat(a))||this,e(o(r),"State",L.TITLE),i(o(r),"ball",E,o(r)),i(o(r),"obstacleSpawner",I,o(r)),i(o(r),"uiManager",T,o(r)),i(o(r),"bgm",A,o(r)),e(o(r),"roundDelay",1.7),e(o(r),"curColorIndex",null),e(o(r),"colorQueue",[]),e(o(r),"score",0),r}n(r,t);var a=r.prototype;return a.onLoad=function(){r.Instance=this},a.start=function(){this.score=0,s.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.ball.bindGameController(this),this.initColorQueue(),this.ball.setColor(this.curColorIndex),this.uiManager.titleLayer.active=!0,this.bgm.play()},a.onTouchStart=function(t){this.State===L.TITLE&&(this.State=L.PLAYING,this.uiManager.titleLayer.active=!1,this.uiManager.mainMenuLayer.active=!0,this.startNewRound())},a.getColorCount=function(){return this.ball.getColorCount()},a.initColorQueue=function(){for(var t=0;t<3;t++){var e=Math.floor(Math.random()*this.getColorCount());this.colorQueue.push(e)}this.curColorIndex=this.colorQueue[0]},a.startNewRound=function(){var t=this;if(this.State===L.PLAYING){this.ball.setColor(this.curColorIndex),this.obstacleSpawner.Spawn(this.curColorIndex),this.colorQueue.shift();var e=Math.floor(Math.random()*this.getColorCount());this.colorQueue.push(e),this.scheduleOnce((function(){return t.startNewRound()}),this.roundDelay)}},a.AddScore=function(){this.score+=1,this.uiManager.setScore(this.score.toString())},a.SetGameOver=function(){this.State=L.GAME_OVER,this.uiManager.showGameOver(),this.bgm.stop()},a.Replay=function(){h.loadScene("maingame")},r}(p),e(G,"Instance",void 0),E=r((C=w).prototype,"ball",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(C.prototype,"obstacleSpawner",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(C.prototype,"uiManager",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=r(C.prototype,"bgm",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/Ball.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Obstacle.ts"],(function(e){"use strict";var t,i,r,n,o,l,a,s,c,u,h,p,d,f,g,b,m,y,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.defineProperty},function(e){l=e.cclegacy,a=e._decorator,s=e.Material,c=e.MeshRenderer,u=e.Camera,h=e.Node,p=e.Collider,d=e.AudioSource,f=e.Vec2,g=e.systemEvent,b=e.SystemEvent,m=e.Vec3,y=e.math,v=e.Component},function(e){C=e.Obstacle}],execute:function(){var E,P,x,M,S,w,A,T,z,I,O,R,G,_,L,B,Y,N,V;l._RF.push({},"bfd12tnQtlGUry1xBN7gQyc","Ball",void 0);var k,D=a.ccclass,U=a.property;!function(e){e[e.TITLE=0]="TITLE",e[e.PLAYING=1]="PLAYING",e[e.PAUSE=2]="PAUSE",e[e.GAME_OVER=3]="GAME_OVER"}(k||(k={}));e("Ball",(E=D("Ball"),P=U(s),x=U(c),M=U(u),S=U(h),w=U(p),A=U(d),T=U(d),E((O=t((I=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,r(n(t),"colorMaterial",O,n(t)),r(n(t),"meshRenderer",R,n(t)),r(n(t),"camera",G,n(t)),r(n(t),"model",_,n(t)),r(n(t),"collider",L,n(t)),r(n(t),"hitSfx",B,n(t)),r(n(t),"breakSfx",Y,n(t)),o(n(t),"colorIndex",0),r(n(t),"speed",N,n(t)),r(n(t),"radius",V,n(t)),o(n(t),"posX",0),o(n(t),"posY",0),o(n(t),"angle",0),o(n(t),"gameCtrl",null),o(n(t),"centerPoint",new f(0,0)),t}i(t,e);var l=t.prototype;return l.start=function(){g.on(b.EventType.TOUCH_MOVE,this.onTouchMove,this),this.resetPos(),this.collider.on("onTriggerEnter",this.onTriggerEnter,this)},l.onTouchMove=function(e){var t=e.getDelta().x;this.angle+=t*this.speed},l.update=function(e){this.gameCtrl.State===k.PLAYING&&(this.updatePos(),this.rotateObject(e))},l.bindGameController=function(e){this.gameCtrl=e},l.updatePos=function(){this.posX=this.centerPoint.x+Math.cos(this.angle)*this.radius,this.posY=this.centerPoint.y+Math.sin(this.angle)*this.radius,this.node.position=new m(this.posX,this.posY,0),this.angle>=360&&(this.angle=0)},l.rotateObject=function(e){this.model.eulerAngles=this.model.eulerAngles.add(new m(500*e,0,0))},l.onTriggerEnter=function(e){var t=e.otherCollider.node.getComponent(C).colorIndex;this.colorIndex===t?(this.gameCtrl.AddScore(),this.hitSfx.play()):(this.breakSfx.play(),this.gameCtrl.SetGameOver())},l.resetPos=function(){this.angle=y.toRadian(-90)},l.getColorCount=function(){return this.colorMaterial.length},l.setColor=function(e){this.meshRenderer.material=this.colorMaterial[e],this.colorIndex=e},t}(v)).prototype,"colorMaterial",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=t(I.prototype,"meshRenderer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(I.prototype,"camera",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(I.prototype,"model",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(I.prototype,"collider",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(I.prototype,"hitSfx",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(I.prototype,"breakSfx",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(I.prototype,"speed",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),V=t(I.prototype,"radius",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),z=I))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/Obstacle.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){"use strict";var t,r,n,i,o,a,s,c,l,u,p,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.defineProperty},function(e){a=e.cclegacy,s=e._decorator,c=e.Material,l=e.MeshRenderer,u=e.Vec3,p=e.Component},function(e){d=e.GameManager,h=e.GAME_STATE}],execute:function(){var f,y,b,m,g,M,v;a._RF.push({},"d0457h1mcdOgYJI6/lhwy+H","Obstacle",void 0);var I=s.ccclass,R=s.property;e("Obstacle",(f=I("Obstacle"),y=R(c),b=R(l),f((M=t((g=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(i(t),"colorMaterial",M,i(t)),n(i(t),"meshRenderer",v,i(t)),o(i(t),"speed",70),o(i(t),"colorIndex",0),t}r(t,e);var a=t.prototype;return a.start=function(){},a.update=function(e){d.Instance.State===h.PLAYING&&(this.node.position=new u(this.node.position.x,this.node.position.y,this.node.position.z+this.speed*e))},a.setColor=function(e){this.meshRenderer.material=this.colorMaterial[e],this.colorIndex=e},t}(p)).prototype,"colorMaterial",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(g.prototype,"meshRenderer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/ObstacleSpawner.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Obstacle.ts","./GameManager.ts"],(function(t){"use strict";var e,r,a,n,o,i,s,c,l,u,f,p,h,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.defineProperty},function(t){i=t.cclegacy,s=t._decorator,c=t.Prefab,l=t.instantiate,u=t.Component,f=t.math},function(t){p=t.Obstacle},function(t){h=t.GameManager,b=t.GAME_STATE}],execute:function(){var M,v,g,d,m;i._RF.push({},"f8855xYMmlJb4ihZtupB8pj","ObstacleSpawner",void 0);var P=s.ccclass,y=s.property;t("ObstacleSpawner",(M=P("ObstacleSpawner"),v=y(c),M((m=e((d=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,a(n(e),"obstaclePrefab",m,n(e)),o(n(e),"colorQueue",void 0),e}return r(e,t),e.prototype.Spawn=function(t){if(h.Instance.State===b.PLAYING){console.log("targetColorIndex",t);for(var e=2*Math.PI/16,r=Math.floor(3*Math.random()+2),a=[],n=16,o=0;o<r;o++){var i=n-2*(r-1-o),s=Math.floor(Math.random()*(i-2+1)+2),c=0;o<r-1?(n-=s,c=s):c=n,a.push(c)}for(var u=[],M=Math.floor(Math.random()*a.length),v=function(e){if(e===M)return t;var r=h.Instance.getColorCount(),a=Math.floor(Math.random()*r);return a===t&&(a=f.clamp(a+1,0,r)),a},g=0;g<a.length;g++)u.push(v(g));for(var d=function(t){for(var e=0,r=0;r<a.length;r++){if(!(r>t))e+=a[r]}return e},m=[],P=0,y=0;y<16;y++)y<d(P)||P++,m.push(u[P]);for(var S=0;S<16;S++){var w=S*e,C=0+4.5*Math.cos(w),I=0+4.5*Math.sin(w),O=l(this.obstaclePrefab);O.setParent(this.node),O.setPosition(C,I,-300),O.getComponent(p).setColor(m[S])}}},e}(u)).prototype,"obstaclePrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./UIManager.ts","./Obstacle.ts","./Ball.ts","./ObstacleSpawner.ts","./GameManager.ts"],(function(){"use strict";return{setters:[null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});